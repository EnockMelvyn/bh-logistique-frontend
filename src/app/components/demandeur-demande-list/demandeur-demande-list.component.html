<div class="card">
  <div class="card-header">
    <h1 class="card-title">Mes demandes</h1>
  </div>
  <!-- /.card-header -->
  <div class="card-body">
    <div class="button-row">
        <button class="btn btn-primary float-right" (click)="goToCreateDemande(1)" value="">Enregistrer une demande Economat</button>
        <!-- <button mat-button class="btn btn-primary" (click)="goToCreateDemande(2)" value="">Enregistrer une demande Moyen Généraux</button> -->
    </div>
    <br>

    <br/>
    <div class="col-md-12">
      <table class="table" mat-table [dataSource]="dataSource">
        <ng-container matColumnDef="numRef">
          <th mat-header-cell *matHeaderCellDef> N° Ref </th>
          <td mat-cell *matCellDef="let demande"> {{demande.numRef}} </td>
        </ng-container>

        <!-- <ng-container matColumnDef="estimation">
          <th mat-header-cell *matHeaderCellDef> Estimation </th>
          <td mat-cell *matCellDef="let demande"> {{demande.estimation}} </td>
        </ng-container> -->
        
        <ng-container matColumnDef="observation">
          <th mat-header-cell *matHeaderCellDef> Observation </th>
          <td mat-cell *matCellDef="let demande"> {{demande.observation}} </td>
        </ng-container>

        <ng-container matColumnDef="dateDemande">
            <th mat-header-cell *matHeaderCellDef> Date de la demande </th>
            <td mat-cell *matCellDef="let demande"> {{ demande.dateDemande | date:'dd-MM-yyyy HH:mm' }} </td>
        </ng-container>
  
        <!-- <ng-container matColumnDef="demandeur">
            <th mat-header-cell *matHeaderCellDef> Demandeur </th>
            <td mat-cell *matCellDef="let demande"> {{demande.demandeur}} </td>
        </ng-container> -->
        
        <ng-container matColumnDef="directionId">
            <th mat-header-cell *matHeaderCellDef> Direction </th>
            <td mat-cell *matCellDef="let demande"> {{demande.directionId?.libelleDirection}} </td>
        </ng-container>
          
        <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef> Statut </th>
            <td mat-cell *matCellDef="let demande"> {{demande.status.libelleStatut}} </td>
        </ng-container>

        <ng-container matColumnDef="urgent">
            <th mat-header-cell *matHeaderCellDef> Urgent ?</th>
            <td mat-cell *matCellDef="let demande"> {{demande.urgent ? "Oui" : "Non"}} </td>
          </ng-container>
  
          <!-- <ng-container matColumnDef="justifUrgence">
            <th mat-header-cell *matHeaderCellDef> Justificatif de l'urgence </th>
            <td mat-cell *matCellDef="let demande"> {{demande.justifUrgence}} </td>
          </ng-container> -->
          
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef> </th>
            <td mat-cell *matCellDef="let demande"> 
              <div class="row button-row">
                <div class="button-container">
                  <button class="btn btn-primary" aria-label="Bouton 1 Modifier">
                    <mat-icon fab fa-pencil (click)="goToUpdateDemande(demande)">edit</mat-icon>
                  </button>
                </div>
                <!-- <div class="button-container">
                  <button (click)="openDialogUpdateDemande(demande.idDemande)" mat-mini-fab color="primary" aria-label="Bouton 1 Modifier">
                    <mat-icon fab fa-pencil>check_circle_outline</mat-icon>
                  </button>
                </div> -->
                <!-- <div class="button-container">
                  <button (click)="openDialogUpdateDemande(demande.idDemande)" mat-mini-fab color="primary" aria-label="Bouton 1 Modifier">
                    <mat-icon fab fa-pencil>edit</mat-icon>
                  </button>
                </div> -->
              </div>  
            </td>
          </ng-container>

        <tr class="thead-light" mat-header-row *matHeaderRowDef="colonnes"></tr>
        <tr class="tbody" mat-row *matRowDef="let myRowData; columns: colonnes"></tr>
        <tr class="mat-row" *matNoDataRow>
          <td  *ngIf="!loading" class="mat-cell" colspan="8"> Aucune données</td>
          <td class="mat-cell " colspan="8"><mat-progress-spinner *ngIf="loading" color="primary" mode="indeterminate" > </mat-progress-spinner></td>
        </tr>
      </table>
      <mat-paginator [pageSizeOptions]="[10, 20, 50]" showFirstLastButtons aria-label="dataSource"></mat-paginator>
    </div>
  </div>

</div>
